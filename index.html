<!DOCTYPE html> 
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <style>
     @font-face {
  font-family: "icomoon";
  src: url("../fonts/icomoon/icomoon.eot?srf3rx");
  src: url("../fonts/icomoon/icomoon.eot?srf3rx#iefix")
      format("embedded-opentype"),
    url("../fonts/icomoon/icomoon.ttf?srf3rx") format("truetype"),
    url("../fonts/icomoon/icomoon.woff?srf3rx") format("woff"),
    url("../fonts/icomoon/icomoon.svg?srf3rx#icomoon") format("svg");
  font-weight: normal;
  font-style: normal;
}
/* =======================================================
*
* 	Template Style
*	Edit this section
*
* ======================================================= */
body {
  font-family: "Open Sans", Arial, sans-serif;
  line-height: 1.6;
  font-size: 16px;
  font-weight: 300;
  overflow-x: hidden;
}
body.fh5co-offcanvas {
  overflow: hidden;
}

a {
  color: #66d37e;
  -webkit-transition: 0.5s;
  -o-transition: 0.5s;
  transition: 0.5s;
}
a:hover {
  text-decoration: none !important;
  color: #66d37e !important;
}

p,
ul,
ol {
  margin-bottom: 1.5em;
  font-size: 16px;
  color: #848484;
  font-family: "Open Sans", Arial, sans-serif;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  color: #5a5a5a;
  font-family: "Open Sans", Arial, sans-serif;
  font-weight: 400;
  margin: 0 0 30px 0;
}

figure {
  margin-bottom: 2em;
}

::-webkit-selection {
  color: #fcfcfc;
  background: #3c83b9;
}

::-moz-selection {
  color: #fcfcfc;
  background: #3c83b9;
}

::selection {
  color: #fcfcfc;
  background: #3c83b9;
}

#fh5co-header {
  position: relative;
  margin-bottom: 0;
  z-index: 9999999;
}

.fh5co-cover,
.fh5co-hero {
  position: relative;
  height: 800px;
}
@media screen and (max-width: 768px) {
  .fh5co-cover,
  .fh5co-hero {
    height: 700px;
  }
}
.fh5co-cover.fh5co-hero-2,
.fh5co-hero.fh5co-hero-2 {
  height: 600px;
}
.fh5co-cover.fh5co-hero-2 .fh5co-overlay,
.fh5co-hero.fh5co-hero-2 .fh5co-overlay {
  position: absolute !important;
  width: 100%;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: 1;
  background: rgba(0, 0, 0, 0.8);
}

.fh5co-overlay {
  position: absolute !important;
  width: 100%;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  z-index: 1;
  background: rgba(66, 64, 64, 0.9);
  background: rgba(0, 0, 0, 0.8);
}

.fh5co-cover {
  background-size: cover;
  position: relative;
}
@media screen and (max-width: 768px) {
  .fh5co-cover {
    height: inherit;
    padding: 3em 0;
  }
}
.fh5co-cover .btn {
  padding: 1em 5em;
  opacity: 0.9;
}
.fh5co-cover.fh5co-cover_2 {
  height: 600px;
}
@media screen and (max-width: 768px) {
  .fh5co-cover.fh5co-cover_2 {
    height: inherit;
    padding: 3em 0;
  }
}
.fh5co-cover .desc {
  top: 50%;
  position: absolute;
  width: 100%;
  margin-top: -80px;
  z-index: 2;
  color: #fff;
}
@media screen and (max-width: 768px) {
  .fh5co-cover .desc {
    padding-left: 15px;
    padding-right: 15px;
  }
}
.fh5co-cover .desc h2 {
  color: #fff;
  font-size: 72px;
  margin-bottom: 10px;
  font-weight: 300 !important;
}
.fh5co-cover .desc h2 strong {
  font-weight: 700;
}
@media screen and (max-width: 768px) {
  .fh5co-cover .desc h2 {
    font-size: 40px;
  }
}
.fh5co-cover .desc span {
  display: block;
  margin-bottom: 30px;
  font-size: 28px;
  letter-spacing: 1px;
}
.fh5co-cover .desc span a {
  color: #fff;
}
.fh5co-cover .desc span a:hover,
.fh5co-cover .desc span a:focus {
  color: #fff !important;
}
.fh5co-cover .desc span a:hover.btn,
.fh5co-cover .desc span a:focus.btn {
  border: 2px solid #fff !important;
  background: transparent !important;
}
.fh5co-cover .desc span a.fh5co-site-name {
  padding-bottom: 2px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.7);
}

/* Superfish Override Menu */
.sf-menu {
  margin: 0 !important;
}

.sf-menu {
  float: right;
}

.sf-menu ul {
  box-shadow: none;
  border: transparent;
  min-width: 10em;
  *width: 10em;
}

.sf-menu a {
  color: rgba(255, 255, 255, 0.5);
  padding: 0.75em 1em !important;
  font-weight: normal;
  border-left: none;
  border-top: none;
  border-top: none;
  text-decoration: none;
  zoom: 1;
  font-size: 18px;
  border-bottom: none !important;
}
.sf-menu a:hover,
.sf-menu a:focus {
  color: #fff !important;
}

.sf-menu li.active a:hover,
.sf-menu li.active a:focus {
  color: #fff;
}

.sf-menu li,
.sf-menu ul li,
.sf-menu ul ul li,
.sf-menu li:hover,
.sf-menu li.sfHover {
  background: transparent;
}

.sf-menu ul li a,
.sf-menu ul ul li a {
  text-transform: none;
  padding: 0.2em 1em !important;
  letter-spacing: 1px;
  font-size: 14px !important;
}

.sf-menu li:hover a,
.sf-menu li.sfHover a,
.sf-menu ul li:hover a,
.sf-menu ul li.sfHover a,
.sf-menu li.active a {
  color: #fff;
}

.sf-menu ul li:hover,
.sf-menu ul li.sfHover {
  background: transparent;
}

.sf-menu ul li {
  background: transparent;
}

.sf-arrows .sf-with-ul {
  padding-right: 2.5em;
  *padding-right: 1em;
}

.sf-arrows .sf-with-ul:after {
  content: "";
  position: absolute;
  top: 50%;
  right: 1em;
  margin-top: -3px;
  height: 0;
  width: 0;
  border: 5px solid transparent;
  border-top-color: #ccc;
}

.sf-arrows > li > .sf-with-ul:focus:after,
.sf-arrows > li:hover > .sf-with-ul:after,
.sf-arrows > .sfHover > .sf-with-ul:after {
  border-top-color: #ccc;
}

.sf-arrows ul .sf-with-ul:after {
  margin-top: -5px;
  margin-right: -3px;
  border-color: transparent;
  border-left-color: #ccc;
}

.sf-arrows ul li > .sf-with-ul:focus:after,
.sf-arrows ul li:hover > .sf-with-ul:after,
.sf-arrows ul .sfHover > .sf-with-ul:after {
  border-left-color: #ccc;
}

#fh5co-header-section {
  padding: 0;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 2;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.nav-header {
  position: relative;
  float: left;
  width: 100%;
}

#fh5co-logo {
  position: relative;
  z-index: 2;
  font-size: 20px;
  /*text-transform: uppercase;*/
  margin-top: 35px;
  font-weight: 500;
  float: left;
}
#fh5co-logo span {
  font-weight: 700;
}
@media screen and (max-width: 768px) {
  #fh5co-logo {
    width: 100%;
    float: none;
    text-align: center;
  }
}
#fh5co-logo a {
  color: #fff;
}
#fh5co-logo a:hover,
#fh5co-logo a:focus {
  color: #fff !important;
}

#fh5co-menu-wrap {
  position: relative;
  z-index: 2;
  display: block;
  float: right;
  margin-top: 15px;
}
#fh5co-menu-wrap .sf-menu a {
  padding: 1em 0.75em;
}

#fh5co-primary-menu > li > ul li.active > a {
  color: #66d37e !important;
}
#fh5co-primary-menu > li > .sf-with-ul:after {
  border: none !important;
  font-family: "icomoon";
  speak: none;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  /* Better Font Rendering =========== */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  position: absolute;
  float: right;
  margin-right: -5px;
  top: 50%;
  margin-top: -7px;
  content: "\e922";
  color: rgba(255, 255, 255, 0.5);
}
#fh5co-primary-menu > li > ul li {
  position: relative;
}
#fh5co-primary-menu > li > ul li > .sf-with-ul:after {
  border: none !important;
  font-family: "icomoon";
  speak: none;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  /* Better Font Rendering =========== */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  position: absolute;
  float: right;
  margin-right: 10px;
  top: 20px;
  font-size: 16px;
  content: "\e924";
  color: rgba(0, 0, 0, 0.5);
}

#fh5co-primary-menu .fh5co-sub-menu {
  padding: 10px 7px 10px;
  background: #fff;
  left: 0;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  -ms-border-radius: 5px;
  border-radius: 5px;
  -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  -moz-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  -ms-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  -o-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
}
#fh5co-primary-menu .fh5co-sub-menu > li > .fh5co-sub-menu {
  left: 100%;
}

#fh5co-primary-menu .fh5co-sub-menu:before {
  position: absolute;
  top: -9px;
  left: 20px;
  width: 0;
  height: 0;
  content: "";
}

#fh5co-primary-menu .fh5co-sub-menu:after {
  position: absolute;
  top: -8px;
  left: 21px;
  width: 0;
  height: 0;
  border-right: 8px solid transparent;
  border-bottom: 8px solid #fff;
  border-bottom: 8px solid white;
  border-left: 8px solid transparent;
  content: "";
}

#fh5co-primary-menu .fh5co-sub-menu .fh5co-sub-menu:before {
  top: 6px;
  left: 100%;
}

#fh5co-primary-menu .fh5co-sub-menu .fh5co-sub-menu:after {
  top: 7px;
  right: 100%;
  border: none !important;
}

.site-header.has-image #primary-menu .sub-menu {
  border-color: #ebebeb;
  -webkit-box-shadow: 0 5px 15px 4px rgba(0, 0, 0, 0.09);
  -moz-box-shadow: 0 5px 15px 4px rgba(0, 0, 0, 0.09);
  -ms-box-shadow: 0 5px 15px 4px rgba(0, 0, 0, 0.09);
  -o-box-shadow: 0 5px 15px 4px rgba(0, 0, 0, 0.09);
  box-shadow: 0 5px 15px 4px rgba(0, 0, 0, 0.09);
}
.site-header.has-image #primary-menu .sub-menu:before {
  display: none;
}

#fh5co-primary-menu .fh5co-sub-menu a {
  letter-spacing: 0;
  padding: 0 15px;
  font-size: 18px;
  line-height: 34px;
  color: #575757 !important;
  text-transform: none;
  background: none;
}
#fh5co-primary-menu .fh5co-sub-menu a:hover {
  color: #66d37e !important;
}

#fh5co-work-section,
#fh5co-services-section,
#fh5co-content-section,
#fh5co-work-section_2,
#fh5co-blog-section,
#fh5co-features {
  padding: 7em 0;
}
@media screen and (max-width: 768px) {
  #fh5co-work-section,
  #fh5co-services-section,
  #fh5co-content-section,
  #fh5co-work-section_2,
  #fh5co-blog-section,
  #fh5co-features {
    padding: 4em 0;
  }
}

.fh5co-section-gray {
  background: rgba(0, 0, 0, 0.04);
}

.heading-section {
  padding-bottom: 1em;
  margin-bottom: 5em;
}
.heading-section:after {
  position: absolute;
  content: "";
  bottom: 0;
  left: 50%;
  width: 100px;
  margin-left: -50px;
  height: 2px;
  background: #66d37e;
}
.heading-section h3 {
  font-size: 40px;
  font-weight: 300;
  position: relative;
}
.heading-section p {
  font-size: 20px;
}

.feature-text h3 {
  text-transform: uppercase;
  font-size: 14px;
  margin-bottom: 10px;
  font-weight: 700;
  color: #000;
  letter-spacing: 0.2em;
}
.feature-text h3 .number {
  margin-right: 5px;
  color: #66d37e;
  display: -moz-inline-stack;
  display: inline-block;
  zoom: 1;
  *display: inline;
}
.feature-text p {
  font-size: 16px;
}

.services {
  background: #66d37e;
  padding: 40px 20px 20px 20px;
  margin-bottom: 30px;
}
.services span {
  margin-bottom: 30px;
  display: block;
  width: 100%;
}
.services span i {
  font-size: 40px;
  color: #fff !important;
}
.services h3 {
  font-size: 20px;
  font-weight: 400;
  color: #fff;
  color: #fbffa3;
}
.services p {
  font-size: 16px;
  color: #c6e872;
  color: rgba(255, 255, 255, 0.8);
}

.feature-left {
  float: left;
  width: 100%;
  margin-bottom: 30px;
  position: relative;
}
.feature-left .icon {
  float: left;
  text-align: center;
  width: 15%;
}
@media screen and (max-width: 992px) {
  .feature-left .icon {
    width: 10%;
  }
}
@media screen and (max-width: 768px) {
  .feature-left .icon {
    width: 15%;
  }
}
.feature-left .icon i {
  display: table-cell;
  vertical-align: middle;
  font-size: 40px;
  color: #66d37e;
}
.feature-left .feature-copy {
  float: right;
  width: 80%;
}
@media screen and (max-width: 992px) {
  .feature-left .feature-copy {
    width: 90%;
  }
}
@media screen and (max-width: 768px) {
  .feature-left .feature-copy {
    width: 85%;
  }
}
@media screen and (max-width: 480px) {
  .feature-left .feature-copy {
    width: 80%;
  }
}
.feature-left .feature-copy h3 {
  font-size: 18px;
  color: #1a1a1a;
  margin-bottom: 10px;
}
.feature-left .feature-copy p {
  font-size: 16px;
  line-height: 1.8;
}

#fh5co-portfolio {
  padding: 7em 0;
  min-height: 500px;
}
@media screen and (max-width: 768px) {
  #fh5co-portfolio {
    padding: 3em 0;
  }
}

#fh5co-portfolio-list {
  flex-wrap: wrap;
  -webkit-flex-wrap: wrap;
  -moz-flex-wrap: wrap;
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  position: relative;
  float: left;
  padding: 0;
  margin: 0;
  width: 100%;
}
#fh5co-portfolio-list li {
  display: block;
  padding: 0;
  margin: 0 0 10px 1%;
  list-style: none;
  min-height: 400px;
  background-position: center center;
  background-size: cover;
  background-repeat: no-repeat;
  float: left;
  clear: left;
  position: relative;
}
@media screen and (max-width: 480px) {
  #fh5co-portfolio-list li {
    margin-left: 0;
  }
}
#fh5co-portfolio-list li a {
  min-height: 400px;
  padding: 2em;
  position: relative;
  width: 100%;
  display: block;
}
#fh5co-portfolio-list li a:before {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  content: "";
  z-index: 80;
  -webkit-transition: 0.5s;
  -o-transition: 0.5s;
  transition: 0.5s;
  background: transparent;
}
#fh5co-portfolio-list li a:hover:before {
  background: rgba(0, 0, 0, 0.5);
}
#fh5co-portfolio-list li a .case-studies-summary {
  width: auto;
  bottom: 2em;
  left: 2em;
  right: 2em;
  position: absolute;
  z-index: 100;
}
@media screen and (max-width: 768px) {
  #fh5co-portfolio-list li a .case-studies-summary {
    bottom: 1em;
    left: 1em;
    right: 1em;
  }
}
#fh5co-portfolio-list li a .case-studies-summary span {
  text-transform: uppercase;
  letter-spacing: 2px;
  font-size: 13px;
  color: rgba(255, 255, 255, 0.7);
}
#fh5co-portfolio-list li a .case-studies-summary h2 {
  color: #fff;
  margin-bottom: 0;
}
@media screen and (max-width: 768px) {
  #fh5co-portfolio-list li a .case-studies-summary h2 {
    font-size: 20px;
  }
}
#fh5co-portfolio-list li.two-third {
  width: 65.6%;
}
@media screen and (max-width: 768px) {
  #fh5co-portfolio-list li.two-third {
    width: 49%;
  }
}
@media screen and (max-width: 480px) {
  #fh5co-portfolio-list li.two-third {
    width: 100%;
  }
}
#fh5co-portfolio-list li.one-third {
  width: 32.3%;
}
@media screen and (max-width: 768px) {
  #fh5co-portfolio-list li.one-third {
    width: 49%;
  }
}
@media screen and (max-width: 480px) {
  #fh5co-portfolio-list li.one-third {
    width: 100%;
  }
}
#fh5co-portfolio-list li.one-half {
  width: 49%;
}
@media screen and (max-width: 480px) {
  #fh5co-portfolio-list li.one-half {
    width: 100%;
  }
}

#fh5co-features {
  padding: 4em 0;
}
#fh5co-features .feature-left {
  margin-bottom: 0;
}
@media screen and (max-width: 992px) {
  #fh5co-features .feature-left {
    margin-bottom: 30px;
  }
}
#fh5co-features .feature-left .icon i {
  color: #b3b3b3;
}
#fh5co-features .feature-left .icon {
  float: left;
  text-align: center;
  width: 15%;
}
@media screen and (max-width: 992px) {
  #fh5co-features .feature-left .icon {
    width: 10%;
  }
}
@media screen and (max-width: 768px) {
  #fh5co-features .feature-left .icon {
    width: 15%;
  }
}
#fh5co-features .feature-left .feature-copy {
  float: right;
  width: 80%;
}
@media screen and (max-width: 992px) {
  #fh5co-features .feature-left .feature-copy {
    width: 90%;
  }
}
@media screen and (max-width: 768px) {
  #fh5co-features .feature-left .feature-copy {
    width: 85%;
  }
}
@media screen and (max-width: 480px) {
  #fh5co-features .feature-left .feature-copy {
    width: 80%;
  }
}
#fh5co-features .feature-left h3 {
  text-transform: uppercase;
  font-size: 14px;
  font-weight: 700;
}
#fh5co-features .feature-left p {
  font-size: 15px;
}
#fh5co-features .feature-left p:last-child {
  margin-bottom: 0;
}

#fh5co-feature-product {
  padding: 7em 0;
}

#fh5co-services,
#fh5co-about,
#fh5co-contact {
  padding: 7em 0;
}
@media screen and (max-width: 768px) {
  #fh5co-services,
  #fh5co-about,
  #fh5co-contact {
    padding: 4em 0;
  }
}

#fh5co-services .fh5co-number {
  font-size: 30px;
  color: #66d37e;
  position: relative;
  padding-top: 10px;
  font-style: italic;
  display: -moz-inline-stack;
  display: inline-block;
  zoom: 1;
  *display: inline;
}
#fh5co-services .fh5co-number:before {
  position: absolute;
  content: "";
  width: 100%;
  height: 3px;
  top: 0;
  left: 0;
  background: #66d37e;
}
#fh5co-services .fh5co-icon {
  margin-bottom: 30px;
  margin-top: 50px;
  position: relative;
  display: -moz-inline-stack;
  display: inline-block;
  zoom: 1;
  *display: inline;
}
@media screen and (max-width: 768px) {
  #fh5co-services .fh5co-icon {
    margin-top: 0px;
    float: none;
  }
}
#fh5co-services .fh5co-icon i {
  font-size: 200px;
  color: #66d37e;
}
@media screen and (max-width: 768px) {
  #fh5co-services .fh5co-icon i {
    font-size: 100px;
  }
}

#fh5co-contact .contact-info {
  margin: 0;
  padding: 0;
}
#fh5co-contact .contact-info li {
  list-style: none;
  margin: 0 0 20px 0;
  position: relative;
  padding-left: 40px;
}
#fh5co-contact .contact-info li i {
  position: absolute;
  top: 0.3em;
  left: 0;
  font-size: 22px;
  color: rgba(0, 0, 0, 0.3);
}
#fh5co-contact .contact-info li a {
  font-weight: 400 !important;
  color: rgba(0, 0, 0, 0.3);
}
#fh5co-contact .form-control {
  -webkit-box-shadow: none;
  -moz-box-shadow: none;
  -ms-box-shadow: none;
  -o-box-shadow: none;
  box-shadow: none;
  border: none;
  border: 1px solid rgba(0, 0, 0, 0.1);
  font-size: 18px;
  font-weight: 400;
  -webkit-border-radius: 0px;
  -moz-border-radius: 0px;
  -ms-border-radius: 0px;
  border-radius: 0px;
}
#fh5co-contact .form-control:focus,
#fh5co-contact .form-control:active {
  border-bottom: 1px solid rgba(0, 0, 0, 0.5);
}
#fh5co-contact input[type="text"] {
  height: 50px;
}
#fh5co-contact .form-group {
  margin-bottom: 30px;
}

.fh5co-testimonial {
  position: relative;
  background: #fff;
  padding: 4em 0;
  border-radius: 5px;
  -webkit-box-shadow: 0px 10px 20px -12px rgba(0, 0, 0, 0.18);
  -moz-box-shadow: 0px 10px 20px -12px rgba(0, 0, 0, 0.18);
  box-shadow: 0px 10px 20px -12px rgba(0, 0, 0, 0.18);
}
@media screen and (max-width: 768px) {
  .fh5co-testimonial {
    border-right: 0;
    margin-bottom: 80px;
  }
}
.fh5co-testimonial h2 {
  font-size: 16px;
  letter-spacing: 2px;
  text-transform: uppercase;
  font-weight: bold;
  margin-bottom: 50px;
}
.fh5co-testimonial figure {
  position: absolute;
  top: -50px;
  left: 50%;
  margin-left: -44px;
  margin-bottom: 20px;
  background-size: cover;
}
.fh5co-testimonial figure img {
  width: 88px;
  height: 88px;
  border: 10px solid #fff;
  background-size: cover;
  -webkit-border-radius: 50%;
  -moz-border-radius: 50%;
  -ms-border-radius: 50%;
  border-radius: 50%;
}
.fh5co-testimonial blockquote {
  border: none;
  margin-bottom: 20px;
}
.fh5co-testimonial blockquote p {
  font-style: italic;
  font-size: 22px;
  line-height: 1.6em;
  color: #555555;
}
.fh5co-testimonial span {
  font-style: italic;
}

.fh5co-blog {
  margin-bottom: 60px;
}
.fh5co-blog a img {
  width: 100%;
}
@media screen and (max-width: 768px) {
  .fh5co-blog {
    width: 100%;
  }
}
.fh5co-blog .blog-text {
  margin-bottom: 30px;
  position: relative;
  background: #fff;
  width: 90%;
  padding: 30px;
  float: right;
  margin-top: -5em;
  -webkit-box-shadow: 0px 10px 20px -12px rgba(0, 0, 0, 0.18);
  -moz-box-shadow: 0px 10px 20px -12px rgba(0, 0, 0, 0.18);
  box-shadow: 0px 10px 20px -12px rgba(0, 0, 0, 0.18);
}
.fh5co-blog .blog-text span {
  display: inline-block;
  margin-bottom: 20px;
}
.fh5co-blog .blog-text span.posted_by {
  font-style: italic;
  color: rgba(0, 0, 0, 0.3);
  font-size: 18px;
}
.fh5co-blog .blog-text span.comment {
  float: right;
}
.fh5co-blog .blog-text span.comment a {
  color: rgba(0, 0, 0, 0.3);
}
.fh5co-blog .blog-text span.comment a i {
  color: #66d37e;
  padding-left: 7px;
}
.fh5co-blog .blog-text h3 {
  font-size: 20px;
  margin-bottom: 20px;
  font-weight: 300;
  line-height: 1.5;
}
.fh5co-blog .blog-text h3 a {
  color: rgba(0, 0, 0, 0.6);
}

#fh5co-start-project-section {
  padding: 7em 0;
  background: #f64e8b;
}
#fh5co-start-project-section h2 {
  color: white;
  font-size: 60px;
  text-transform: uppercase;
  font-weight: 300;
}
@media screen and (max-width: 768px) {
  #fh5co-start-project-section h2 {
    font-size: 30px;
  }
}
#fh5co-start-project-section a:hover,
#fh5co-start-project-section a:focus,
#fh5co-start-project-section a:active {
  color: white !important;
}

#map {
  width: 100%;
  height: 500px;
  position: relative;
}
@media screen and (max-width: 768px) {
  #map {
    height: 200px;
  }
}

.fh5co-social-icons > a {
  padding: 4px 10px;
  color: #66d37e;
}
.fh5co-social-icons > a i {
  font-size: 26px;
}
.fh5co-social-icons > a:hover,
.fh5co-social-icons > a:focus,
.fh5co-social-icons > a:active {
  text-decoration: none;
  color: #5a5a5a;
}

#footer {
  background: #66d37e;
  padding: 60px 0 40px;
}
#footer p {
  color: white;
  font-size: 14px;
}
#footer p a {
  color: rgba(255, 255, 255, 0.5);
}
#footer p a:hover,
#footer p a:active,
#footer p a:focus {
  color: rgba(255, 255, 255, 0.9) !important;
}

.btn {
  -webkit-transition: 0.3s;
  -o-transition: 0.3s;
  transition: 0.3s;
}

.btn {
  text-transform: uppercase;
  letter-spacing: 2px;
  -webkit-transition: 0.3s;
  -o-transition: 0.3s;
  transition: 0.3s;
}
.btn.btn-primary {
  background: #3c83b9;
  color: #fff;
  border: none !important;
  border: 2px solid transparent !important;
}
.btn.btn-primary:hover,
.btn.btn-primary:active,
.btn.btn-primary:focus {
  box-shadow: none;
  background: #3c83b9;
  color: #fff !important;
}
.btn:hover,
.btn:active,
.btn:focus {
  background: #d9e1e2 !important;
  color: #fff;
  outline: none !important;
}
.btn.btn-default:hover,
.btn.btn-default:focus,
.btn.btn-default:active {
  border-color: transparent;
}

.js .animate-box {
  opacity: 0;
}

#fh5co-wrapper {
  overflow-x: hidden;
  position: relative;
}

.fh5co-offcanvas {
  overflow: hidden;
}
.fh5co-offcanvas #fh5co-wrapper {
  overflow: hidden !important;
}

#fh5co-page {
  position: relative;
  -webkit-transition: 0.5s;
  -o-transition: 0.5s;
  transition: 0.5s;
}
.fh5co-offcanvas #fh5co-page {
  -moz-transform: translateX(-240px);
  -webkit-transform: translateX(-240px);
  -ms-transform: translateX(-240px);
  -o-transform: translateX(-240px);
  transform: translateX(-240px);
}

@media screen and (max-width: 768px) {
  #fh5co-menu-wrap {
    display: none;
  }
}

#offcanvas-menu {
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 99;
  background: #222;
  right: -240px;
  width: 240px;
  padding: 20px;
  overflow-y: scroll !important;
}
#offcanvas-menu ul {
  padding: 0;
  margin: 0;
}
#offcanvas-menu ul li {
  padding: 0;
  margin: 0 0 10px 0;
  list-style: none;
}
#offcanvas-menu ul li a {
  font-size: 18px;
  color: rgba(255, 255, 255, 0.4);
}
#offcanvas-menu ul li a:hover {
  color: #66d37e;
}
#offcanvas-menu ul li > .fh5co-sub-menu {
  margin-top: 9px;
  padding-left: 20px;
}
#offcanvas-menu ul li.active > a {
  color: #66d37e;
}
#offcanvas-menu ul .fh5co-sub-menu {
  display: block !important;
}

.fh5co-nav-toggle {
  cursor: pointer;
  text-decoration: none;
}
.fh5co-nav-toggle.active i::before,
.fh5co-nav-toggle.active i::after {
  background: #fff;
}
.fh5co-nav-toggle.dark.active i::before,
.fh5co-nav-toggle.dark.active i::after {
  background: #fff;
}
.fh5co-nav-toggle:hover,
.fh5co-nav-toggle:focus,
.fh5co-nav-toggle:active {
  outline: none;
  border-bottom: none !important;
}
.fh5co-nav-toggle i {
  position: relative;
  display: -moz-inline-stack;
  display: inline-block;
  zoom: 1;
  *display: inline;
  width: 30px;
  height: 2px;
  color: #fff;
  font: bold 14px/0.4 Helvetica;
  text-transform: uppercase;
  text-indent: -55px;
  background: #fff;
  transition: all 0.2s ease-out;
}
.fh5co-nav-toggle i::before,
.fh5co-nav-toggle i::after {
  content: "";
  width: 30px;
  height: 2px;
  background: #fff;
  position: absolute;
  left: 0;
  -webkit-transition: 0.2s;
  -o-transition: 0.2s;
  transition: 0.2s;
}
.fh5co-nav-toggle.dark i {
  position: relative;
  color: #000;
  background: #000;
  transition: all 0.2s ease-out;
}
.fh5co-nav-toggle.dark i::before,
.fh5co-nav-toggle.dark i::after {
  background: #000;
  -webkit-transition: 0.2s;
  -o-transition: 0.2s;
  transition: 0.2s;
}

.fh5co-nav-toggle i::before {
  top: -7px;
}

.fh5co-nav-toggle i::after {
  bottom: -7px;
}

.fh5co-nav-toggle:hover i::before {
  top: -10px;
}

.fh5co-nav-toggle:hover i::after {
  bottom: -10px;
}

.fh5co-nav-toggle.active i {
  background: transparent;
}

.fh5co-nav-toggle.active i::before {
  top: 0;
  -webkit-transform: rotateZ(45deg);
  -moz-transform: rotateZ(45deg);
  -ms-transform: rotateZ(45deg);
  -o-transform: rotateZ(45deg);
  transform: rotateZ(45deg);
}

.fh5co-nav-toggle.active i::after {
  bottom: 0;
  -webkit-transform: rotateZ(-45deg);
  -moz-transform: rotateZ(-45deg);
  -ms-transform: rotateZ(-45deg);
  -o-transform: rotateZ(-45deg);
  transform: rotateZ(-45deg);
}

.fh5co-nav-toggle {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 9999;
  display: block;
  margin: 0 auto;
  display: none;
  cursor: pointer;
}
@media screen and (max-width: 768px) {
  .fh5co-nav-toggle {
    display: block;
    top: 0px;
    margin-top: 2em;
  }
}

@media screen and (max-width: 480px) {
  .col-xxs-12 {
    float: none;
    width: 100%;
  }
}

.row-bottom-padded-lg {
  padding-bottom: 7em;
}
@media screen and (max-width: 768px) {
  .row-bottom-padded-lg {
    padding-bottom: 2em;
  }
}

.row-top-padded-lg {
  padding-top: 7em;
}
@media screen and (max-width: 768px) {
  .row-top-padded-lg {
    padding-top: 2em;
  }
}

.row-bottom-padded-md {
  padding-bottom: 4em;
}
@media screen and (max-width: 768px) {
  .row-bottom-padded-md {
    padding-bottom: 2em;
  }
}

.row-top-padded-md {
  padding-top: 4em;
}
@media screen and (max-width: 768px) {
  .row-top-padded-md {
    padding-top: 2em;
  }
}

.row-bottom-padded-sm {
  padding-bottom: 2em;
}
@media screen and (max-width: 768px) {
  .row-bottom-padded-sm {
    padding-bottom: 2em;
  }
}

.row-top-padded-sm {
  padding-top: 2em;
}
@media screen and (max-width: 768px) {
  .row-top-padded-sm {
    padding-top: 2em;
  }
}

.border-bottom {
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

.lead {
  line-height: 1.8;
}

.no-js #loader {
  display: none;
}

.js #loader {
  display: block;
  position: absolute;
  left: 100px;
  top: 0;
}

.fh5co-loader {
  position: fixed;
  left: 0px;
  top: 0px;
  width: 100%;
  height: 100%;
  z-index: 9999;
  background: url(../images/hourglass.svg) center no-repeat #222222;
}
p,
div {
  font-family: Lato;
}

/* 
  Colors:
  https://coolors.co/22223b-4a4e69-eadae4-9a8c98-c9ada7 
*/
/*
YANKEES BLUE: #22223B
INDEPENDENCE: #4A4E69
PLATINUM: #EADAE4
SPANISH GRAY: #9A8C98
SILVER PINK: #C9ADA7
*/

.wrapper {
  height: 97vh;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #0b3334;
}

.form-wrapper {
  display: flex;
  flex-direction: column;
  width: 280px;
  max-width: 80%;
  min-width: 100px;
  min-height: 400px;
  padding: 20px 40px;
  border-radius: 6px;
  box-shadow: 0px 8px 36px #222;
  background-color: #fefefe;
}

.form-wrapper > h2 {
  display: flex;
  justify-content: center;
  font-family: "Segoe UI", "Ubuntu", "Roboto", "Open Sans", "Helvetica Neue",
    sans-serif;
  font-size: 2em;
  font-weight: lighter;
  margin-top: 0.25em;
  color: #222;
}



.info {
  padding-bottom: 1em;
  padding-left: 0.5em;
  padding-right: 0.5em;
}

label {
  margin-bottom: 0.5em;
  color: #444;
  font-weight: lighter;
}

input {
  padding: 5px 5px;
  border-radius: 5px;
  outline: none;
  border: 1px solid #d6d1d5;
}

input::placeholder {
  font-size: 1.2em;
  font-weight: lighter;
  color: #bbb;
}
.loginBtn {
  width: 100%;
}
button {
  cursor: pointer;
  margin-right: 0.25em;
  margin-top: 0.5em;
  padding: 0.938em;
  border: none;
  border-radius: 4px;
  background-color: #0b3334;
  color: #fefefe;
}
button:hover {
  background-color: #4a4e69;
  color: #fefefe;
}

.error {
  color: #ed7c5c;
  font-size: 0.7em;
  display: relative;
}

.fullName,
.email,
.password {
  display: flex;
  flex-direction: column;
  margin-bottom: 15px;
}

.fullName {
  width: 100%;
}

.email,
.password {
  width: 100%;
}

.submit {
  width: 100%;
  display: flex;
  flex-wrap: wrap;
}

body {
  background: #4a4e69 !important;
}

.loader {
  width: 500px;
  height: 50px;
  line-height: 50px;
  text-align: center;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  font-family: helvetica, arial, sans-serif;
  text-transform: uppercase;
  font-weight: 900;
  color: #0b3334;
  letter-spacing: 0.2em;
}
.loader::before,
.loader::after {
  content: "";
  display: block;
  width: 15px;
  height: 15px;
  background: #0b3334;
  position: absolute;
  -webkit-animation: load 1.5s infinite alternate ease-in-out;
  animation: load 1.5s infinite alternate ease-in-out;
}
.loader::before {
  top: 0;
}
.loader::after {
  bottom: 0;
}

@-webkit-keyframes load {
  0% {
    left: 0;
    height: 30px;
    width: 15px;
  }
  50% {
    height: 8px;
    width: 40px;
  }
  100% {
    left: 470px;
    height: 30px;
    width: 15px;
  }
}

@keyframes load {
  0% {
    left: 0;
    height: 30px;
    width: 15px;
  }
  50% {
    height: 8px;
    width: 40px;
  }
  100% {
    left: 470px;
    height: 30px;
    width: 15px;
  }
}
body {
  color: black;
}

.bg-green {
  padding: 30px;
}
.editAddBtn,
.addHoldBtn,
.cancelAddBtn {
  height: 3em;
  margin-bottom: 10px;
  margin-left: 10px;
}
.fade.in {
  opacity: 1 !important;
}
.modal-dialog {
  max-width: 600px;
  top: 200px;
}
.modal-content {
  width: 550px !important;
}
.addInfo {
  margin-bottom: 30px;
}
.ODRightSphere_SPH,
.OSLeftSphere_SPH,
.ODRightCylinder_CYL,
.OSLeftCylinder_CYL,
.ODRightAxis,
.OSLeftAxis,
.ODRightADD,
.OSLeftADD {
  width: 100px;
  margin-right: 10px;
}

.SingularPDValue,
.ODRightPupillaryDistance_PD,
.OSLeftPupillaryDistance_PD {
  width: 50px;
  height: 30px;
}
.detail-error {
  height: 30px;
  margin-top: 10px;
}
.error-detail {
  margin: 0px;
}
.error {
  font-size: 20px;
  margin-left: 50px;
}
.one-pupil,
.two-pupil {
  height: 30px;
}
input[type="checkbox"] {
  height: 50px !important;
  width: 100px !important;
  padding: 0px;
}
.notifyjs-foo-base {
  opacity: 0.85;
  width: 400px;
  background: rgb(253, 120, 120);
  padding: 5px;
  border-radius: 10px;
}

.notifyjs-foo-base .title {
  width: 380px;
  float: left;
  margin: 10px 0 0 10px;
  text-align: right;
}

.notifyjs-foo-base .buttons {
  width: 100px;
  float: right;
  font-size: 9px;
  padding: 5px;
  margin: 2px;
}

.notifyjs-foo-base button {
  font-size: 9px;
  padding: 5px;
  margin: 2px;
  width: 90px;
}
/*# sourceMappingURL=style.css.map */

    </style>
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
      <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://npmcdn.com/react-bootstrap-table/dist/react-bootstrap-table-all.min.css">
    
  </link>
    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"
    ></script>

    <!-- babel for JSX -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <!-- React -->
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    
    <!-- Transposit SDK -->
    <script src="https://unpkg.com/transposit@1.0.1/dist/bundle.prod.js"></script>
    <script src="https://npmcdn.com/react-bootstrap-table/dist/react-bootstrap-table.min.js" ></script>
    <script src="https://rawgit.com/notifyjs/notifyjs/master/dist/notify.js"></script>
    <script>
      // These variables in triple curly braces are dynamically injected by Transposit and should not be modified
      const maintainer = "{{{maintainer}}}";
      const applicationName = "{{{applicationName}}}";
      const host = "{{{host}}}";
      const transposit = new Transposit.Transposit(
        maintainer,
        applicationName,
        host
      );
    </script>
  </head>
  <body class="bg-light">
    <script>
      const transposit2 = new Transposit.Transposit(
        "https://vue-management-ui-staging-2ghmp.transposit.io"
       // "https://vue-management-ui-staging-s74bh.transposit.io"
      );
    </script>
    <div id="root" class="container mt-3 mt-md-5" ></div>

    <script type="text/babel">
      class App extends React.Component {
        render() {
          return <LoginEmail/>;
          //return <ListViewTable email="boftx@sbcglobal.net"/>;
        }
      }

      class LoginEmail extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            email: null,
            code: null,
            comcode: null,
            codeFlag: false,
            expireAt: null,
            errors: {
              email: "",
              code: ""
            }
          };
        }
        emailCheck = email => {
          transposit2
            .runOperation("query_on_email", { email: email })
            .then(response => {
              if (response.status !== "SUCCESS") {
                throw response;
              }
              $(".email").hide();
              $(".code").show();
              $("#message").text("Please enter the 6 digit code you received via email");
              this.viewLoader();
            })
            .catch(response => {
              console.log(response);
            });
        };
        viewLoader = () => {
          $(".loader").show();
          $(".wrapper").hide();

          setTimeout(function() {
            $(".loader").hide();
            $(".wrapper").show();
          }, 6000);
        };

        verifyCode = (email, code) => {
          transposit2
            .runOperation("query_valid_check", { code: code })
            .then(response => {
                console.log(response);
              if (response.status !== "SUCCESS") {
                alert("Your email address was not found.");
                throw response;
              }
              const results = response.result.results;
              
              if (results.length == 1 && results[0].results && results[0].results.email === email) {
                  localStorage.setItem('email', email);
                ReactDOM.render(<ListViewTable email={email}/>, document.getElementById("root"));
              } else {
                alert("Your email address was not found.");
              }
            })
            .catch(response => {
              console.log(response);
            });
        };
        validEmailRegex = RegExp(
          /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i
        );
        validateForm = errors => {
          let valid = true;
          Object.values(errors).forEach(
            val => val.length > 0 && (valid = false)
          );
          return valid;
        };
        handleChange = event => {
          event.preventDefault();
          const { name, value } = event.target;
          let errors = this.state.errors;
          //console.log(name, value);

          switch (name) {
            case "email":
              errors.email = this.validEmailRegex.test(value)
                ? ""
                : "Please enter a correct email";
              break;
            case "code":
              this.state.codeFlag = true;
              this.state.code = value;
            default:
              break;
          }

          this.setState({ errors, [name]: value });
        };

        handleSubmit = event => {
          event.preventDefault();
          if (this.validateForm(this.state.errors)) {
            console.info("Valid Form");

            this.state.codeFlag
              ? this.verifyCode(this.state.email, this.state.code)
              : this.emailCheck(this.state.email);
          } else {
            console.error("Invalid Form");
          }
        };

        render() {
          const { errors } = this.state;

          let style = {};
          style.display = "none";
          return (
            <React.Fragment>
              <div className="wrapper">
                <div className="form-wrapper">
                  <h2>My Vue Order</h2>
                  <form onSubmit={this.handleSubmit} noValidate>
                    <div className="email">
                      <label htmlFor="email">Enter your email below:</label>
                      <input
                        type="email"
                        name="email"
                        onChange={this.handleChange}
                        noValidate
                      />

                      {errors.email.length > 0 && (
                        <span className="error">{errors.email}</span>
                      )}
                    </div>
                    <div className="code" style={style}>
                      <label htmlFor="code">Verification code:</label>
                      <input
                        type="text"
                        name="code"
                        onChange={this.handleChange}
                        noValidate
                      />

                      {errors.code.length > 0 && (
                        <span className="code">{errors.code}</span>
                      )}
                    </div>
                    <div className="info">
                      <small id="message">
                        Please use the same email you used for your order, and verify within 5 minutes.
                      </small>
                    </div>
                    <div className="submit">
                      <button className="loginBtn">Login</button>
                    </div>
                  </form>
                </div>
              </div>
              <div className="loader" style={style}>
                We're sending you an email...
              </div>
            </React.Fragment>
          );
        }
      }
      
      async function transposit_action(action, params) {
        
          console.log(localStorage.getItem('email'));
          let res = await transposit2
          //.runOperation('query_valid_check', {email:localStorage.getItem('email')})
          .runOperation('query_valid_check', {email:'jason@vueglasses.com'})
          .then(response => {
            console.log("before check of valid session");
            console.log(response);
            if (response.status !== "SUCCESS") {
              throw response;
            }
            const results = response.result.results;
            console.log("here3");
            console.log(results);
            console.log(results.length == 1);
            const status = results[0].status;
            console.log(status);
            console.log(results[0].results);
            console.log(results[0].results.status);
            if (status === "SUCCESS") {
              return results;
            } else  {
              throw response;
            }
          })
          .then(res => {
              console.log("in check of valid session");
              console.log(res);
            if(res.length >= 1){
              //if(1){  
                let arr_result = transposit2
                .runOperation(action, params)
                .then(response => {
                    console.log(response);
                    if (response.status !== "SUCCESS") {
                    throw response;
                    }

                    const results = response.result.results;
                    return results;
                })
                .catch(response => {
                    console.log(response);
                    return "error";
                });
               // return "timeout";
                return arr_result;
            } else {
                $.notify("Your Session is Timed Out", "info");
                ReactDOM.render(<App/>, document.getElementById("root"));
                throw res;
            }
            
          })
          .catch(response => {
            $.notify("Your Session is Timed Out", "info");
            ReactDOM.render(<App/>, document.getElementById("root"));
            console.log(response);
            return "error";
          });

          return res;
          
      }

      class ListViewTable extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            defaultVal:{},
            provider: [{
              "AddressCity": "",
              "AddressCountry": "",
              "AddressHold": false,
              "AddressLine1": "",
              "AddressLine2": "",
              "AddressPhone": "",
              "AddressPostalCode": "",
              "AddressState": "",
              "BackerID": "",
              "Email": "",
              "FullAddress": "",
              "ItemID": "",
              "ItemNumber": "",
              "ItemNumberofTotalOrderNumber": "",
              "Name": "",
              "OrderStatus": "",
              "PledgedAt": "",
              "PrescriptionHold": false,
              "Quantity": "",
              "SkuCode": "",
              "SkuName": ""}],
            orderStatus:
              {
                "0": "Unable to complete order due to error",
                "1": "Lens details OK, waiting for submission to factory.", 
                "2": "Lens information sent to lens factory.", 
                "3": "Lenses made, awaiting assembly by lens factory.",
                "4": "Lenses made, arrived at Vue's office.",
                "5": "Lenses delivered to assembly factory, awaiting assembly.",
                "6": "Lenses assembled, waiting to ship.",
                "7": "Shipped.",
                "8": "Delivered.",
                "9": "Shipment Error.",
                "10": "Received return, lens/frames will be redone and resent.",
                "999": "Order has been cancelled."
              },
            countryProvider:[{key:'US', value:'US'}, {key:'CL', value:'CL'}, {key:'UA', value:'UA'}, {key:'GB', value:'GB'}],
              addFlag: true,
              progressiveFlag:false
          }
          
          transposit_action("query_on_email_sql", {email:this.props.email})
          .then(res => {
            if (res != 'error') {
                const resData = this.convertResult(res);
                this.setState({defaultVal: resData[0]});
                this.setState({provider: resData});
                //if (!this.state.progressiveFlag) $('.addInfo').hide();
                //console.log(this.state.provider[0]['AddressCountry'])
                $('.list-add-country').val(this.state.provider[0]['AddressCountry']).attr("selected", "selected");
                if (this.state.provider[0].AddressHold === 'Yes') {$('.addHoldBtn').text('Release Hold');}
                else {$('.addHoldBtn').text('Place Address Hold') };     
            } else {
                console.log('time out data')
                //ReactDOM.render(<App/>, document.getElementById("root"));
            }
            
            
          })
          .catch(err => console.error(err));
          
        }
      
        convertResult = (res) => {
          let resData=[];
            let skuflag = false;
            for (let i = 0; i<res.length; i++) {
              let temp = {};
              temp["BackerID"] = res[i]["BackerID"] !== undefined ? res[i]["BackerID"]["N"] : "" ;
              temp["AddressCity"] = res[i]["AddressCity"] !== undefined ? res[i]["AddressCity"]["S"] : "";
              temp["AddressCountry"] = res[i]["AddressCountry"] !== undefined ? res[i]["AddressCountry"]["S"] : "";
              temp["AddressHold"] = res[i]["AddressHold"] !== undefined ? (res[i]["AddressHold"]["BOOL"] ? 'Yes' : 'No') : 'No';
              temp["AddressLine1"] = res[i]["AddressLine1"] !== undefined ? res[i]["AddressLine1"]["S"] : "";
              temp["AddressLine2"] = res[i]["AddressLine2"] !== undefined ? res[i]["AddressLine2"]["S"] : "";
              //if (temp["AddressLine2"] === 'NoVal') temp["AddressLine2"] = "";
              temp["AddressPostalCode"] = res[i]["AddressPostalCode"] !== undefined ? res[i]["AddressPostalCode"]["S"] : "";
              temp["AddressPhone"] = res[i]["AddressPhone"] !== undefined ? res[i]["AddressPhone"]["S"] : "";
              temp["AddressState"] = res[i]["AddressState"] !== undefined ? res[i]["AddressState"]["S"] : "";
              temp["Email"] = res[i]["Email"] !== undefined ? res[i]["Email"]["S"] : "";
              temp["FullAddress"] = res[i]["FullAddress"] !== undefined ? res[i]["FullAddress"]["S"] : "";
              temp["ItemID"] = res[i]["ItemID"] !== undefined ? res[i]["ItemID"]["S"] : "";
              temp["ItemNumber"] = res[i]["ItemNumber"] !== undefined ? res[i]["ItemNumber"]["N"] : "";
              temp["ItemNumberofTotalOrderNumber"] = res[i]["ItemNumberofTotalOrderNumber"] !== undefined ? res[i]["ItemNumberofTotalOrderNumber"]["S"] : "";
              temp["Name"] = res[i]["Name"] !== undefined ? res[i]["Name"]["S"] : "";
              temp["OrderStatus"] = res[i]["OrderStatus"] !== undefined ? res[i]["OrderStatus"]["N"] : "";
              if (temp["OrderStatus"] >= 7) {
                console.log("ERR");
                this.state.addFlag = false;
              }
              //temp["OrderStatus"] = 1;
              
              temp["PledgedAt"] = res[i]["PledgedAt"] !== undefined ? res[i]["PledgedAt"]["S"] : "";
              temp["PrescriptionHold"] = res[i]["PrescriptionHold"] !== undefined ? (res[i]["PrescriptionHold"]["BOOL"] ? 'Yes' : 'No') : 'No';
              temp["Quantity"] = res[i]["Quantity"] !== undefined ? res[i]["Quantity"]["N"] : "";
              temp["SkuCode"] = res[i]["SkuCode"] !== undefined ? res[i]["SkuCode"]["S"] : "";
              temp["SkuName"] = res[i]["SkuName"] !== undefined ? res[i]["SkuName"]["S"] : "";
              //temp["SkuCode"] = "Progressive";
              
              temp["Notes"] = res[i]["Notes"] !== undefined ? res[i]["Notes"]["S"] : "";
              temp["ODRightSphere_SPH"] = res[i]["ODRightSphere_SPH"] !== undefined ? res[i]["ODRightSphere_SPH"]["N"] : "";
              temp["ODRightCylinder_CYL"] = res[i]["ODRightCylinder_CYL"] !== undefined ? res[i]["ODRightCylinder_CYL"]["N"] : "";
              temp["ODRightAxis"] = res[i]["ODRightAxis"] !== undefined ? res[i]["ODRightAxis"]["N"] : "";
              temp["OSLeftSphere_SPH"] = res[i]["OSLeftSphere_SPH"] !== undefined ? res[i]["OSLeftSphere_SPH"]["N"] : "";
              temp["OSLeftCylinder_CYL"] = res[i]["OSLeftCylinder_CYL"] !== undefined ? res[i]["OSLeftCylinder_CYL"]["N"] : "";
              temp["OSLeftAxis"] = res[i]["OSLeftAxis"] !== undefined ? res[i]["OSLeftAxis"]["N"] : "";
              temp["ODRightADD"] = res[i]["ODRightADD"] !== undefined ? res[i]["ODRightADD"]["N"] : "";
              temp["OSLeftADD"] = res[i]["OSLeftADD"] !== undefined ? res[i]["OSLeftADD"]["N"] : "";
              temp["PDOneorTwoNumbers"] = res[i]["PDOneorTwoNumbers"] !== undefined ? res[i]["PDOneorTwoNumbers"]["S"] : "";
              temp["SingularPDValue"] = res[i]["SingularPDValue"] !== undefined ? res[i]["SingularPDValue"]["N"] : "";
              temp["ODRightPupillaryDistance_PD"] = res[i]["ODRightPupillaryDistance_PD"] !== undefined ? res[i]["ODRightPupillaryDistance_PD"]["N"] : "";
              temp["OSLeftPupillaryDistance_PD"] = res[i]["OSLeftPupillaryDistance_PD"] !== undefined ? res[i]["OSLeftPupillaryDistance_PD"]["N"] : "";
              temp["MismatchError"] = res[i]["MismatchError"] !== undefined ? res[i]["MismatchError"]["S"] : "";
              temp["PrescriptionError"] = res[i]["PrescriptionError"] !== undefined ? res[i]["PrescriptionError"]["S"] : "";
              temp["EmailError"] = res[i]["EmailError"] !== undefined ? res[i]["EmailError"]["S"] : "";
              temp["PaymentError"] = res[i]["PaymentError"] !== undefined ? res[i]["PaymentError"]["S"] : "";
              temp["PrescriptionLastModified"] = res[i]["PrescriptionLastModified"] !== undefined ? res[i]["PrescriptionLastModified"]["S"] : "";

              resData.push(temp);
              
              console.log(resData);
            }
            return resData;
        }
      

        
        dataFormatter = (cell, row) => {
          return this.state.orderStatus[cell];
        }
        errorFormatter = (cell, row) => {
          if (row.MismatchError === '' && row.PrescriptionError === '') return 'None';
          return row.MismatchError === '' ? row.PrescriptionError : row.MismatchError + "<br/>" + row.PrescriptionError;
        }
        prescriptionDataFormatter = (cell, row) => {
          let btn = <button className='btn btn-primary btn-xs '>View Prescription</button>;
          //else if (cell === 'No') btn = <button className='btn btn-primary btn-xs '>Place Hold</button>;
          return btn;
        }

        handleChange = event => {
          event.preventDefault();
          console.log(event.target.name, event.target.value)
          switch (event.target.name) {
            case 'list-add-country':
              
             
              break;
            case 'list-add-city':
             
              break;
            default:
              break;
          }
        };
        handleEdit = event => {
          event.preventDefault();
          //console.log(event.target.name)
          if (event.target.name === 'editAddBtn'){
            
            let editAddBtn = $('.editAddBtn')
            if (this.state.addFlag) {
              if ($('input').attr('disabled')) {
                $('input').removeAttr('disabled'); 
                $('.list-add-country').removeAttr('disabled');
                 editAddBtn.text('Save');
                 $('.cancelAddBtn').removeAttr('hidden');
              }
              else {
                $('input').attr('disabled', 'disabled'); 
                $('.list-add-country').attr('disabled', 'disabled');
                $('.cancelAddBtn').attr('hidden', 'hidden');
                editAddBtn.text('Edit');
                let add_line = $('.list-add-line').val();
                let add_name = $('.list-add-name').val();
                let add_city = $('.list-add-city').val();
                let add_state = $('.list-add-state').val();
                let add_postalcode = $('.list-add-postalcode').val();
                let add_country = $('.list-add-country').val();
                let add_phone = $('.list-add-phone').val();
                let add_line2 = $('.list-add-line2').val();
                let fsuc = true;
                for (let i=0;i<this.state.provider.length; i++) {
                  transposit_action('update_vue_orders', {AddressLine1:add_line,AddressLine2:add_line2, Name:add_name, AddressCity:add_city, AddressState:add_state,  AddressPostalCode:add_postalcode, AddressCountry:add_country, AddressPhone:add_phone, BackerID:this.state.provider[i]["BackerID"], ItemNumber:this.state.provider[i]["ItemNumber"]})
                  .then(res => {
                    if(res != 'error') {
                        this.state.defaultVal.AddressLine1 = add_line;
                        this.state.defaultVal.Name = add_name;
                        this.state.defaultVal.AddressCity = add_city;
                        this.state.defaultVal.AddressState = add_state;
                        this.state.defaultVal.AddressPostalCode = add_postalcode;
                        this.state.defaultVal.AddressCountry = add_country;
                        this.state.defaultVal.AddressPhone = add_phone;
                        this.state.defaultVal.AddressLine2 = add_line2;
                        if (i == this.state.provider.length - 1 && fsuc) $.notify("Address Information Changed Successfully", "success");
                    }else {
                        console.log('timeout update address')
                        fsuc = false;
                    }
                    
                    
                    
                    console.log(res);
                  })
                  .catch(err => console.error(err));  
                  
                }
                
                
              }
            } else {
              $.notify("You can't change Address Info", "info");
            }

            
            
          } else if(event.target.name === 'cancelAddBtn') {
            $('input').attr('disabled', 'disabled');
            $('.editAddBtn').text('Edit Address');
            $('.cancelAddBtn').attr('hidden', 'hidden');
            this.state.provider[0] = this.state.defaultVal;
            $('.list-add-line').val(this.state.defaultVal['AddressLine1']);
            $('.list-add-name').val(this.state.defaultVal['Name']);
            $('.list-add-line2').val(this.state.defaultVal['AddressLine2']);
            $('.list-add-city').val(this.state.defaultVal['AddressCity']);
            $('.list-add-state').val(this.state.defaultVal['AddressState']);
            $('.list-add-postalcode').val(this.state.defaultVal['AddressPostalCode']);
            $('.list-add-country').val(this.state.defaultVal['AddressCountry']);
            $('.list-add-phone').val(this.state.defaultVal['AddressPhone']);
          } else if (event.target.name === 'addHoldBtn') {
            if(this.state.addFlag) {
              let tmp = {};
              if (this.state.provider[0].AddressHold === 'No') {
                $('.addHoldBtn').text('Release Hold');
                for(let i=0; i<this.state.provider.length; i++){
                  tmp["BackerID"] = this.state.provider[i].BackerID;
                  tmp["ItemNumber"] = this.state.provider[i].ItemNumber;
                  tmp["AddressHold"] = true;
                  transposit_action('update_vue_orders', tmp)
                  .then(res => {
                    if(res != 'error') {
                        this.state.provider[i].AddressHold = 'Yes';
                        $.notify("Place Address Hold Success", "success");
                    }else {
                        console.log('timeout address hold')
                    }
                    
                    console.log("success");
                  })
                  .catch(err => {console.error(err); return false;});  
                }
                
              } else {
                $('.addHoldBtn').text('Place Address Hold');
                for(let i=0; i<this.state.provider.length; i++){
                  tmp["BackerID"] = this.state.provider[i].BackerID;
                  tmp["ItemNumber"] = this.state.provider[i].ItemNumber;
                  tmp["AddressHold"] = false;
                  transposit_action('update_vue_orders', tmp)
                  .then(res => {
                    if(res != 'error') {
                        this.state.provider[i].AddressHold = 'No';
                        $.notify("Release Hold Success", "success");
                    }else {
                        console.log('timeout address hold')
                    }
                    console.log("success");
                  })
                  .catch(err => {console.error(err); return false;});  
                }
              }
            } else {
              $.notify("You can't Hold Address", "info");
            } 
            
          }
          //$('input').removeAttr('disabled');
          //console.log(event.target);
        };



       shouldDisplayHoldOption = (orderStatus) => {
        if (orderStatus == 0 || orderStatus == 1) {
            return false;
        }

        if (orderStatus >=2 && orderStatus <= 6) {
            return true;
        }
        
        // >=7, or invalid
        return false;
      }
       
        beforeSaveCell = (row, cellName, cellValue) => {
          // do your stuff...
          
          if (cellName !== '') {
            let tmp = {};
            tmp[cellName] = cellValue === 'Yes' ? true: false;
            //if (cellName == 'OrderStatus') tmp[cellName] = 1;
            tmp["BackerID"] = row.BackerID;
            tmp["ItemNumber"] = row.ItemNumber;
            
            if (!this.shouldDisplayHoldOption(row.OrderStatus) && cellName === 'PrescriptionHold') {
              console.log(cellValue);
              return true;
            } else if (this.shouldDisplayHoldOption(row.OrderStatus) && cellName === 'PrescriptionHold') {
              console.log(cellValue);
                  return "true";
            } else if (cellName === 'AddressHold'){
             
              transposit_action('update_vue_orders', tmp)
              .then(res => {
                $.notify("Address Hold", "success");
                return true;
              })
              .catch(err => {console.error(err); return false;});  
            }
            
            
            
          } else {
            
            if (cellValue === 'save') {
              let tmp = {};
              row.BacerID !=='' ? tmp["BackerID"] = row.BackerID : false;
              row.ItemNumber !=='' ? tmp["ItemNumber"] = row.ItemNumber : false;
              row.ODRightSphere_SPH !=='' ? tmp["ODRightSphere_SPH"] = row.ODRightSphere_SPH : false;
              row.ODRightCylinder_CYL !=='' ? tmp["ODRightCylinder_CYL"] = row.ODRightCylinder_CYL : false;
              row.ODRightAxis !=='' ? tmp["ODRightAxis"] = row.ODRightAxis : false;
              row.OSLeftSphere_SPH !=='' ? tmp["OSLeftSphere_SPH"] = row.OSLeftSphere_SPH : false;
              row.OSLeftCylinder_CYL !=='' ? tmp["OSLeftCylinder_CYL"] = row.OSLeftCylinder_CYL : false;
              row.OSLeftAxis !=='' ? tmp["OSLeftAxis"] = row.OSLeftAxis : false;
              tmp["ODRightADD"] = row.ODRightADD; 
              tmp["OSLeftADD"] = row.OSLeftADD;
              row.PDOneorTwoNumbers !=='' ? tmp["PDOneorTwoNumbers"] = row.PDOneorTwoNumbers : false;
              
              row.SingularPDValue !=='' ? tmp["SingularPDValue"] = row.SingularPDValue : false;
              row.ODRightPupillaryDistance_PD !=='' ? tmp["ODRightPupillaryDistance_PD"] = row.ODRightPupillaryDistance_PD : false;
              row.OSLeftPupillaryDistance_PD !=='' ? tmp["OSLeftPupillaryDistance_PD"] = row.OSLeftPupillaryDistance_PD : false;
              tmp["MismatchError"] = row.MismatchError;
              tmp["PrescriptionError"] = row.PrescriptionError;
              tmp["EmailError"] = row.EmailError;
              tmp["PaymentError"] = row.PaymentError;
              let current_datetime = new Date();
              let formatted_date = current_datetime.getFullYear() + "-" + (current_datetime.getMonth() + 1) + "-" + current_datetime.getDate() + "T" + current_datetime.getHours() + ":" + current_datetime.getMinutes() + ":" + current_datetime.getSeconds() ;
              tmp["PrescriptionLastModified"] = formatted_date;
              tmp["SkuName"] = row.SkuName;
              tmp["SkuCode"] = row.SkuCode;

              // automatically update hold when order status is 2-6
              if (row.OrderStatus >=2 && row.OrderStatus<=6) {
                tmp['PrescriptionHold'] = true;
                row.PrescriptionHold = "Yes";
              }
              console.log(tmp);
              transposit_action('update_vue_orders', tmp)
              .then(res => {
                if(res != 'error') {
                  $.notify("Prescription Detail Information Changed Successfully", "success");
                  return true;
                } else {
                  console.log('timeout prescription detail change'); return false;
                }
                
              })
              .catch(err => {console.error(err); return false;});  
            } else {
              
              console.log(row, cellValue);
            }
            return false;
          }
          
        }
        prescriptionHoldFormatter = (row, value) => {
          console.log(row, value);
          return <button>Place Hold</button>;
        }

        isOrderForGlasses = (SkuName) => {
          const lowerCase = SkuName.toLowerCase();
          return !lowerCase.includes("shirt") && !lowerCase.includes("charging");
        }

        render() {
          var ReactBsTable = window.BootstrapTable;
          var BootstrapTable = window.ReactBootstrapTable.BootstrapTable;
          var TableHeaderColumn = window.ReactBootstrapTable.TableHeaderColumn;
          
          const cellEditProp = {
            mode: 'click',
            blurToSave: true,
            beforeSaveCell: this.beforeSaveCell,
          };
          return (
            <React.Fragment>
            <div>
            <img  className="float-md-right ml-md-3" width="64" height="64"  data-type="image" itemProp="image" src="">
            </img>
            <h1>Vue Order Dashboard</h1>
            <p className="text-secondary">
            Here is a list of your orders. Reach out to <a href="mailto:support@vueglasses.com">support@vueglasses.com</a> for questions!
            </p>
            <h4>Address</h4>
            </div>
            <form className="addInfo">
              <div className="form-row">
                <input type="text" className="list-add-name col-md-6" name="list-add-name" defaultValue={this.state.provider[0]['Name']} onChange={this.handleChange} disabled placeholder="Name"/>
                <input type="tel" className="list-add-phone col-md-6" name="list-add-phone" defaultValue={this.state.provider[0]['AddressPhone']} onChange={this.handleChange} disabled placeholder="Phone"/>
              </div>
              <div className="form-row">
                <input className="list-add-line col-md-6" name="list-add-line" defaultValue={this.state.provider[0]['AddressLine1']} onChange={this.handleChange} disabled placeholder="Address Line 1"/>
                <input className="list-add-line2 col-md-6" name="list-add-line2" defaultValue={this.state.provider[0]['AddressLine2']} onChange={this.handleChange} disabled placeholder="Address Line 2"/>
              </div>
              <div className="form-row">
                <input className="list-add-city col-md-3" name="list-add-city" defaultValue={this.state.provider[0]['AddressCity']} onChange={this.handleChange} disabled placeholder="City"/>
                <input className="list-add-state col-md-3" name="list-add-state" defaultValue={this.state.provider[0]['AddressState']} onChange={this.handleChange} disabled placeholder="State"/>
                <input className="list-add-postalcode col-md-3" name="list-add-postalcode" defaultValue={this.state.provider[0]['AddressPostalCode']} onChange={this.handleChange} disabled placeholder="Postal Code"/>
                <select className="list-add-country" name="list-add-country" defaultValue={this.state.provider[0]['AddressCountry']} onChange={this.handleChange} disabled>
                    {this.state.countryProvider.map((obj) => 
                      <option key={obj.key}>{obj.value}</option>
                    )}
                  </select>
              </div>
              <div>
                {/*Hidden for 10/31 launch because we don't want people making edits yet*/}
                <button className="editAddBtn btn btn-primary" name="editAddBtn" onClick={this.handleEdit}>Edit Address</button>
                <button className="cancelAddBtn btn btn-secondary" name="cancelAddBtn" onClick={this.handleEdit} hidden>Cancel Edit</button>
                
                {/*<button className="addHoldBtn btn btn-danger" name="addHoldBtn" onClick={this.handleEdit}>Place Address Hold</button>*/}
              </div>
            </form>

            <div>
            <h4>Glasses</h4>
            <BootstrapTable data={ this.state.provider.filter((d) => {return this.isOrderForGlasses(d['SkuName'])}) } cellEdit={ cellEditProp } >
                <TableHeaderColumn dataField='BackerID' isKey hidden>BackerID</TableHeaderColumn>
                
                <TableHeaderColumn dataField='SkuName' editable={false} tdStyle = {{verticalAlign: 'middle', whiteSpace: 'normal'}}>Item</TableHeaderColumn>
                <TableHeaderColumn dataField='' customEditor={ { getElement: createDetailEditor } } tdStyle = {{whiteSpace: 'normal', textAlign: 'center', verticalAlign: 'middle'}} dataFormat={this.prescriptionDataFormatter}>Prescriptions</TableHeaderColumn>
                {/*Hidden for 10/31 launch because we don't want people making edits yet
                <TableHeaderColumn dataField='PrescriptionHold'   customEditor={ { getElement: createPrescriptionEditor } }  dataFormat={this.prescriptionDataFormatter}>Prescriptions </TableHeaderColumn>
            	  */}
                <TableHeaderColumn dataField='OrderStatus'   tdStyle={ { whiteSpace: 'normal' } } dataFormat={this.dataFormatter} editable={false} >Order Status</TableHeaderColumn>
                <TableHeaderColumn dataField='' editable={false} tdStyle = {{whiteSpace: 'normal', textAlign: 'center', verticalAlign: 'middle'}} dataFormat={this.errorFormatter}>Errors</TableHeaderColumn>
            </BootstrapTable>
            </div>

            &nbsp;
            <div>
            <h4>Accessories</h4>
            <BootstrapTable data={ this.state.provider.filter((d) => {return !this.isOrderForGlasses(d['SkuName'])}) } cellEdit={ cellEditProp } >
                <TableHeaderColumn dataField='BackerID' isKey hidden>BackerID</TableHeaderColumn>
                <TableHeaderColumn dataField='SkuName' editable={false}>Item</TableHeaderColumn>

            </BootstrapTable>
            </div>
            </React.Fragment>
          );
        }
      }
      const createDetailEditor = (onUpdate, props) => (<DetailEditor onUpdate={ onUpdate } {...props}/>);
      const createPrescriptionEditor = (onUpdate, props) => (<PrescriptionEditor onUpdate={ onUpdate } {...props}/>);
      
      class PrescriptionEditor extends React.Component {
        constructor(props) {
          super(props);
          this.updateData = this.updateData.bind(this);
          this.state = { val: props.defaultValue };
          
          //this.state = { amount: props.defaultValue.amount, currency: props.defaultValue.currency };
        }
        componentDidMount() {
          
            if (this.props.row.OrderStatus <= 1) {
              
              if (this.state.val === 'Yes') this.state.val = 'No';
              else this.state.val = 'Yes';
              let tmp = {};
              tmp["PrescriptionHold"] = this.state.val === 'Yes' ? true: false;
              
              tmp["BackerID"] = this.props.row.BackerID;
              tmp["ItemNumber"] = this.props.row.ItemNumber;
              transposit_action('update_vue_orders', tmp)
              .then(res => {
                if(res != 'error') {
                    $.notify("Prescription hold status updated", "success"); 
                    
                }
                else {
                    console.log('timeout prescription hold');
                    if (this.state.val === 'Yes') this.state.val = 'No';
                    else this.state.val = 'Yes';
                }
                
                this.updateData();
              })
              .catch(err => {console.error(err); return false;});
              
            }
            else {
              $.notify("Can't hold prescription because glasses have already been sent", "warn");
              this.updateData();
            }
         
        }
        updateData() {
          
          this.props.onUpdate(this.state.val);
        }
        render() {
          return (
            <span>
              
              
            </span>
          );
        }
      }
      // Editing logic
      class DetailEditor extends React.Component {

        constructor(props) {
          super(props);
          this.updateData = this.updateData.bind(this);
          
          this.state = {
            row: props.row,
            open: true,
            data: [],
            dataCyl: [],
            dataAxis: [],
            dataAdd: [],
            dataSinglePD:[],
            dataDualPD:[],
            defaultVal:[],
            progressiveFlag: false,
            errorStatus:false
            
          };
          
          if ((this.props.row.SkuCode.toLowerCase()).indexOf('plano') !== -1 || !this.canEditPrescription(this.props.row.OrderStatus)) {
            this.props.onUpdate('close');
            $.notify(`Prescription can't be modified. Order Status = ${this.props.row.OrderStatus}`, "info");
          }
            
          let i;
          
          
          for (i=-18; i<=6; i+=0.25) this.state.data.push({key: 4 * (i + 18), value:i.toFixed(2)});
          for (i=-6; i<=6; i+=0.25) this.state.dataCyl.push({key: 4 * (i + 6), value:i.toFixed(2)});
          for (i=0; i<=180; i+=1) this.state.dataAxis.push({key:  i , value:i});
          for (i=0; i<=3.5; i+=0.25) this.state.dataAdd.push({key: 4 * i, value:i});
          for (i=48; i<=80; i+=1) this.state.dataSinglePD.push({key: i, value:i});
          for (i=24; i<=40; i+=1) this.state.dataDualPD.push({key: i, value:i});
        }
        componentDidMount() {
          
          $.notify.addStyle('foo', {
            html: 
              "<div>" +
                "<div class='clearfix'>" +
                  "<div class='title' data-notify-html='title'/>" +
                  "<div class='buttons'>" +
                    "<button class='no'>No</button>" +
                    "<button class='yes' data-notify-text='button'></button>" +
                  "</div>" +
                "</div>" +
              "</div>"
          });

          //listen for click events from this style
          $(document).on('click', '.notifyjs-foo-base .no', function() {
            //programmatically trigger propogating hide event
            $(this).trigger('notify-hide');
          });
          $(document).on('click', '.notifyjs-foo-base .yes', function() {
            //show button text
            $('.modal-save').text('Save');
            $('input.detail_editor').removeAttr('disabled');
            $('select.detail_editor').removeAttr('disabled');
            //hide notification
            $(this).trigger('notify-hide');
          });
          if (((this.props.row.SkuCode).toLowerCase()).indexOf("progressive") === -1) {
            
            $('.od-add-detail').hide();
            
          }
          if (this.props.row.MismatchError !== '') {
            this.props.row.MismatchError = '';
            let tmp = {};
            tmp["MismatchError"] = "";
            tmp["BackerID"] = this.props.row.BackerID;
            tmp["ItemNumber"] = this.props.row.ItemNumber;
            transposit_action('update_vue_orders', tmp)
            .then(res => {
              
              console.log(res);
            })
            .catch(err => {console.error(err); return false;});
          }
          
          this.validateError();
          if (this.props.row.PDOneorTwoNumbers.indexOf("Two") >= 0) {
            $('.two-pupil').show();
            $('.one-pupil').hide();
            $('.PDOneorTwoNumbers').val('Two Separate Numbers');
          } else {
            $('.one-pupil').show();
            $('.two-pupil').hide();
            
          }
          
        }
        checkError() {
          console.log("in checkerror");
          let preErr = this.props.row.PrescriptionError;
          let err = this.props.row.PrescriptionError.toLowerCase();
          let sku = this.props.row.SkuCode.toLowerCase();
          let errStr = "for sku: "+sku+", ";
          if (preErr.length >= 1) {
            const is_progressive = sku.indexOf("progressive") !== -1;
            const is_prescription = sku.indexOf("prescription") !== -1;
            
            if(err.indexOf("data missing") >= 0 || err.indexOf("data incomplete") >= 0) 
            {
                errStr += "in data missing ";
              if(!is_progressive && !is_prescription) {
                errStr += "in plano";
                this.props.row.PrescriptionError = '';
              } else if(!is_progressive && is_prescription) {
                errStr += "in prescription";
                if(this.props.row.ODRightSphere_SPH !== '' && this.props.row.ODRightCylinder_CYL !== '' && this.props.row.ODRightAxis !== '' &&
                 this.props.row.OSLeftSphere_SPH !== '' && this.props.row.OSLeftCylinder_CYL !== '' && this.props.row.OSLeftAxis !== '' &&
                 this.props.row.PDOneorTwoNumbers !== '') {
                  this.props.row.PrescriptionError = '';
                }
              } else if(is_progressive && !is_prescription) {
                errStr += "in progressive";
                if(this.props.row.ODRightSphere_SPH !== '' && this.props.row.ODRightCylinder_CYL !== '' && this.props.row.ODRightAxis !== '' &&
                 this.props.row.OSLeftSphere_SPH !== '' && this.props.row.OSLeftCylinder_CYL !== '' && this.props.row.OSLeftAxis !== '' &&
                 this.props.row.PDOneorTwoNumbers !== '' && this.props.row.ODRightADD !== '' && this.props.row.OSLeftADD !== '') {
                  this.props.row.PrescriptionError = '';
                }
              } else if(is_progressive && is_prescription) {
                console.log("unknown state");
                console.log(this.props.row);
              }
            } else if(err.indexOf("missing single/double pd") >= 0 )
            {
                errStr += "in pd";
              let pdval = this.props.row.PDOneorTwoNumbers.toLowerCase();
              if(pdval.indexOf("one number") !== -1) {
                if(this.props.row.SingularPDValue !== '') this.props.row.PrescriptionError = '';
              } else {
                if(this.props.row.ODRightPupillaryDistance_PD !== '' && this.props.row.OSLeftPupillaryDistance_PD !== '') this.props.row.PrescriptionError = '';
              }
            } else if(err.indexOf("missing progressive data") >= 0 )
            {
              if (this.props.row.ODRightADD !== '' && this.props.row.OSLeftADD !== '')  {
		            this.props.row.PrescriptionError = '';
              }
            } else if(err.indexOf("sku not progressive") >= 0 )
            {
              console.log("in sku not prog");
              if (!is_progressive) { // clean it up
                this.props.row.ODRightADD = '';
                this.props.row.OSLeftADD = '';
                this.props.row.PrescriptionError = '';
              }
            } else if(err.indexOf("data suggests plano") >= 0 )
            {
              
              if(!(this.props.row.ODRightSphere_SPH == 0 && this.props.row.ODRightCylinder_CYL == 0 && this.props.row.ODRightAxis == 0 &&
                 this.props.row.OSLeftSphere_SPH == 0 && this.props.row.OSLeftCylinder_CYL == 0 && this.props.row.OSLeftAxis == 0 
                 && this.props.row.PDOneorTwoNumbers == '' && this.props.row.ODRightADD == 0 && this.props.row.OSLeftADD == 0 
                 && this.props.row.SingularPDValue == '' && this.props.row.ODRightPupillaryDistance_PD == '' && this.props.row.OSLeftPupillaryDistance_PD == '' 
                 && (is_progressive || is_prescription))) {
                  this.props.row.PrescriptionError = ''
                  
                }
            }
          }
        }
        validateError() {
          if(this.props.row.MismatchError === '' && this.props.row.PrescriptionError === '') {
            $('.error-detail').hide();
            return true;
          } else {
            console.log("error: "+ this.props.row.MismatchError);
            console.log("error: "+ this.props.row.PrescriptionError);
            return false;
          }
        }
        updateData() {
          console.log("in updte data");
          
          if ($('.modal-save').text() === 'Edit') {
            if(this.canEditPrescription(this.props.row.OrderStatus)) {
              if (this.props.row.OrderStatus >= 2){
                $.notify({
                  title: 'Your lenses have already been sent to the factory. If you change your prescription, this will add another 5 weeks for them to be remade. Are you sure you want to edit?',
                  button: 'Yes'
                }, { 
                  style: 'foo',
                  autoHide: false,
                  clickToHide: false
                });
              } else {
                $('.modal-save').text('Save');
                $('input.detail_editor').removeAttr('disabled');
                $('select.detail_editor').removeAttr('disabled');
                
              }
            } else {
              $.notify(`Prescription can't be modified. Order Status = ${this.props.row.OrderStatus}`, "info");
            }
            
            
          }
          else {
            console.log(this.props.row);
            this.checkError();
            this.validateError() ? this.props.onUpdate("save"): $.notify('You need to fix all the errors before saving', 'error');
 
          }
          
          /*if((this.props.row.SkuCode.toLowerCase()).indexOf("progressive") === -1 && (this.props.row.ODRightADD !== '' || this.props.row.OSLeftADD !== '')){
            console.log("debug0");
            console.log(this.props.row);
            console.log("debug1");
            this.props.row.ODRightADD = '';
            this.props.row.OSLeftADD = '';
            console.log("debug2");
            console.log(this.props.row);
            if( this.props.row.PrescriptionError.toLowerCase().indexOf("sku not progressive") >= 0) {
                this.props.row.PrescriptionError = '';
            }
          }
*/
          
          
        }
        close = () => {
          this.setState({ open: false });
          //console.log(this.props.row.Name);
          this.props.onUpdate("close");
        }
        handleChange = e => {
          e.preventDefault();
          if(e.target.name === 'SingularPDValue'){
            if((e.target.value < 40 || e.target.value > 80) && e.target.value >= 10) {
              $.notify("Values must between 40 and 80", "warning");
              this.state.row[e.target.name] = "";
              this.props.row[e.target.name] = "";
              }
            else this.state.row[e.target.name] = e.target.value;
          } else if (e.target.name === 'ODRightPupillaryDistance_PD' || e.target.name === 'OSLeftPupillaryDistance_PD' ){
              if((e.target.value < 24 || e.target.value > 40) && e.target.value >= 10) {
                $.notify("Values must between 40 and 80", "warning");
                this.state.row[e.target.name] = "";
                this.props.row[e.target.name] = "";
                }
              else this.state.row[e.target.name] = e.target.value;
          } else this.state.row[e.target.name] = e.target.value;
          if(e.target.name === 'PDOneorTwoNumbers') {
            console.log(e.target.value);
            if(e.target.value === 'One Number') {
              $('.one-pupil').show();
              $('.two-pupil').hide();
            } else {
              $('.two-pupil').show();
              $('.one-pupil').hide();
            }
          }
          this.checkError();
          
          //console.log(this.props.row)
        }

        // Logic for editing/hold prescriptions 
        canEditPrescription = (orderStatus) => {
            if (orderStatus == 0 || orderStatus == 1) {
              return true;
            }

            if (orderStatus >=2 && orderStatus <= 6) {
              return true;
            }

            // >=7, or invalid
            return false;
        }

        render() {
          const fadeIn = this.state.open ? 'in' : '';
          const display = this.state.open ? 'block' : 'none';
          
          return (
            <div className={ `modal fade ${fadeIn}` } id='myModal' role='dialog' style={ { display } }>
              <div className='modal-dialog'>
                <div className='modal-content'>
                  <div className="modal-header">
                    <h5 className="modal-title">Prescription Details</h5>
                  </div>
                  <div className='modal-body'>



                    <div className="container">
                      <div className="row">
                        <strong className="error-detail">Error: </strong>
                        <label className="error" >{this.props.row.MismatchError}</label>  
                        <label className="error" >{this.props.row.PrescriptionError}</label> 
                      </div> 
                      <div className="row">
                        <strong>Frame: </strong>
                        <label className="detail-glass-info-name">{this.props.row.SkuName}</label>
                      </div>
                      <div className="row">
                        <strong>Prescription Info:</strong>  
                      </div>
                      <div className="row">
                        <table className="table-borderless">
                          <thead>
                            <tr>
                              <th scope="col"></th>
                              <th scope="col">SPH</th>
                              <th scope="col">CYL</th>
                              <th scope="col">Axis</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <th scope="row">OD (Right)</th>
                              <td>
                                <select disabled className="ODRightSphere_SPH detail_editor" name="ODRightSphere_SPH" onChange={this.handleChange} defaultValue={this.state.row.ODRightSphere_SPH}>
                                  
                                  {this.state.data.map((obj) => 
                                  <option key={obj.key}>{obj.value}</option>
                                  )}
                                </select>
                              </td>
                              <td>
                                <select disabled className="ODRightCylinder_CYL detail_editor" name="ODRightCylinder_CYL" onChange={this.handleChange}  defaultValue={this.props.row.ODRightCylinder_CYL}>
                                  
                                  {this.state.dataCyl.map((obj) => 
                                  <option key={obj.key}>{obj.value}</option>
                                  )}
                                </select>
                              </td>
                              <td>
                                <select disabled className="ODRightAxis detail_editor" name="ODRightAxis" onChange={this.handleChange}  defaultValue={this.props.row.ODRightAxis}>
                                  
                                  {this.state.dataAxis.map((obj) => 
                                  <option key={obj.key}>{obj.value}</option>
                                  )}
                                </select>
                              </td>
                            </tr>
                            <tr>
                              <th scope="row">OS (Left)</th>
                              <td>
                                <select disabled className="OSLeftSphere_SPH detail_editor" name="OSLeftSphere_SPH" onChange={this.handleChange}  defaultValue={this.props.row.OSLeftSphere_SPH}>
                                  
                                  {this.state.data.map((obj) => 
                                  <option key={obj.key}>{obj.value}</option>
                                  )}
                                </select>
                              </td>
                              <td>
                                <select disabled className="OSLeftCylinder_CYL detail_editor" name="OSLeftCylinder_CYL" onChange={this.handleChange}  defaultValue={this.props.row.OSLeftCylinder_CYL}>
                                  
                                  {this.state.dataCyl.map((obj) => 
                                  <option key={obj.key}>{obj.value}</option>
                                  )}
                                </select>
                              </td>
                              <td>
                                <select disabled className="OSLeftAxis detail_editor" name="OSLeftAxis" onChange={this.handleChange}  defaultValue={this.props.row.OSLeftAxis}>
                                  
                                  {this.state.dataAxis.map((obj) => 
                                  <option key={obj.key}>{obj.value}</option>
                                  )}
                                </select>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div className="row">
                        <div className="col-md-6">
                          <label>Pupillary distance (PD) format: </label>
                        </div>
                        <div className="col-md-6">
                          <select disabled className="PDOneorTwoNumbers detail_editor" name="PDOneorTwoNumbers" onChange={this.handleChange}  defaultValue={this.props.row.PDOneorTwoNumbers}>
                              <option key='0' val='One Number'>One Number</option>
                              <option key='1' val='Two Separate Numbers'>Two Separate Numbers</option>
                          </select>
                        </div>
                      </div>
                      <div className="row">
                        <div className="col-md-6 one-pupil">
                          <label>Pupillary distance (PD): </label>
                        </div>
                        <div className="col-md-6 one-pupil">
                          <select disabled className="SingularPDValue detail_editor"  onChange={this.handleChange} name="SingularPDValue" defaultValue={this.state.row.SingularPDValue}>
                            {this.state.dataSinglePD.map((obj) => 
                                <option key={obj.key}>{obj.value}</option>
                                )}
                          </select>
                        </div>
                        <div className="col-md-3 two-pupil">
                          <label>OD (Right) PD: </label>
                        </div>
                        <div className="col-md-3 two-pupil">
                          <select disabled className="ODRightPupillaryDistance_PD detail_editor"  onChange={this.handleChange} name="ODRightPupillaryDistance_PD" defaultValue={this.state.row.ODRightPupillaryDistance_PD}>
                            {this.state.dataDualPD.map((obj) => 
                              <option key={obj.key}>{obj.value}</option>
                            )}
                          </select>
                        </div>
                        <div className="col-md-3 two-pupil">
                          <label>OS (Left) PD: </label>
                        </div>
                        <div className="col-md-3 two-pupil">
                          <select disabled className="OSLeftPupillaryDistance_PD detail_editor"  onChange={this.handleChange} name="OSLeftPupillaryDistance_PD" defaultValue={this.state.row.OSLeftPupillaryDistance_PD}>
                            {this.state.dataDualPD.map((obj) => 
                              <option key={obj.key}>{obj.value}</option>
                            )}
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div className='modal-footer'>
                    {/*Hidden for 10/31 launch because we don't want people making edits yet
                    <button type='button' className='btn btn-primary' onClick={ this.updateData }>Save</button>
                    */}

                    <button type='button' className='btn btn-primary modal-save' onClick={ this.updateData }>Edit</button>
                    <button type='button' className='btn btn-default' onClick={ this.close }>Close</button>
                  </div>

                </div>
              </div>
            </div>
          );
        }
      }
      //console.log(ReactBsTable, BootstrapTable, TableHeaderColumn);
      ReactDOM.render(<App/>, document.getElementById("root"));
      
    </script>
  </body>
</html>
